<!DOCTYPE html>
<html lang="th">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">   
<head>
<meta charset="UTF-8" />
<title>ค้นหาข้อมูล CSV</title>
<style>
    body {
        font-family: "Inter", Arial, sans-serif;
        background: #f4f6f9;
        margin: 0;
        padding: 30px;
        color: #333;
    }

    .container {
        max-width: 900px;
        margin: auto;
        background: #fff;
        padding: 25px;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    h2 {
        text-align: center;
        margin-bottom: 25px;
        font-size: 26px;
        font-weight: 700;
        color: #2c3e50;
    }

    .form-group {
        display: grid;
        grid-template-columns: 150px 1fr;
        gap: 10px;
        margin-bottom: 12px;
    }

    label {
        font-weight: 600;
        padding-top: 6px;
    }

    input {
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 8px;
        font-size: 15px;
    }

    button {
        width: 100%;
        margin-top: 15px;
        padding: 12px;
        background: #0066ffef;
        color: #fff;
        border: none;
        border-radius: 10px;
        font-size: 18px;
        cursor: pointer;
        transition: 0.2s;
    }

    button:hover {
        background: #004ecc;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 25px;
        font-size: 15px;
    }

    th {
        background: #0066ff;
        color: #fff;
        padding: 10px;
        position: sticky;
        top: 0;
    }

    td {
        padding: 10px;
        border-bottom: 1px solid #ddd;
    }

    tr:nth-child(even) {
        background: #f2f7ff;
    }

    .no-data {
        text-align: center;
        padding: 15px;
        color: #999;
    }
</style>
</head>

<body>
<div class="container">

<h2>ระบบค้นหาข้อมูล</h2>

<div class="form-group"><label>Vendor Name:</label><input type="text" id="vendor"></div>
<div class="form-group"><label>JDE Stock No:</label><input type="text" id="jde"></div>
<div class="form-group"><label>SAP Stock No:</label><input type="text" id="sap"></div>
<div class="form-group"><label>Brand:</label><input type="text" id="brand"></div>

<button onclick="searchData()"><span class="material-icons">search</span>ค้นหา</button>

<table id="resultTable">
    <thead>
        <tr id="headerRow"></tr>
    </thead>
    <tbody></tbody>
</table>

</div>

<script>
let data = [];
let targetColumns = [
    "Vendor Name",
    "JDE Stock No",
    "SAP Stock No",
    "Brand",
    "Supplier Description",
    "Unit Price",
    "Lead Time",
    "Start Date",
    "End Date",
    "Quotation No",
    "Credit Term"
];

fetch("data.csv")
    .then(res => res.text())
    .then(text => {
        const rows = text.split(/\r?\n/).map(r => r.split(","));
        const headers = rows[0];

        const headerRow = document.getElementById("headerRow");
        headerRow.innerHTML = "";
        targetColumns.forEach(col => headerRow.innerHTML += `<th>${col}</th>`);

        data = rows.slice(1).map(row => {
            let obj = {};
            headers.forEach((h, i) => {
                obj[h] = row[i] ? row[i].trim() : "";
            });
            return obj;
        });
    });

function searchData() {
    const vendor = document.getElementById("vendor").value.trim().toLowerCase();
    const jde = document.getElementById("jde").value.trim().toLowerCase();
    const sap = document.getElementById("sap").value.trim().toLowerCase();
    const brand = document.getElementById("brand").value.trim().toLowerCase();

    const tbody = document.querySelector("#resultTable tbody");
    tbody.innerHTML = "";

    if (!vendor && !jde && !sap && !brand) return;

    const filtered = data.filter(row => {
        const vMatch = vendor ? (row["Vendor Name"] || "").toLowerCase().includes(vendor) : true;
        const jdeMatch = jde ? (row["JDE Stock No"] || "").toLowerCase().includes(jde) : true;
        const sapMatch = sap ? (row["SAP Stock No"] || "").toLowerCase().includes(sap) : true;
        const brandMatch = brand ? (row["Brand"] || "").toLowerCase().includes(brand) : true;

        return vMatch && jdeMatch && sapMatch && brandMatch;
    });

    if (filtered.length === 0) {
        tbody.innerHTML = `<tr><td colspan="${targetColumns.length}" class="no-data">ไม่พบข้อมูล</td></tr>`;
        return;
    }

    filtered.forEach(row => {
        let tr = "<tr>";
        targetColumns.forEach(col => {
            tr += `<td>${row[col] || ""}</td>`;
        });
        tr += "</tr>";
        tbody.innerHTML += tr;
    });
}
["vendor", "jde", "sap", "brand"].forEach(id => {
    document.getElementById(id).addEventListener("keydown", function(e) {
        if (e.key === "Enter") {
            searchData();
        }
    });
});
</script>

</body>
</html>
